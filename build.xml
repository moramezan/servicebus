<project default="usage" basedir="." xmlns:sf="antlib:com.salesforce">

    <taskdef uri="antlib:com.salesforce" classpath="lib/salesforce_ant_29.0/ant-salesforce.jar" />

    <property file="build.properties"/>
    <property environment="env"/>

    <target name="pull" description="Retrieves all package components to dev org">
        <sf:retrieve username="${sf.username}" password="${sf.password}" serverurl="https://login.salesforce.com" retrieveTarget="src" packageNames="Event Driven Architecture"/>
    </target>

    <target name="push" description="Deploys all package components to dev org">
        <sf:deploy username="${sf.username}" password="${sf.password}" serverurl="https://login.salesforce.com" deployRoot="src"/>
    </target>

    <target name="package" description="Deploys all components to packaging org">
        <sf:deploy username="eda@countryskippers.com" password="CS42lkj1" serverurl="https://login.salesforce.com" deployRoot="src"/>
    </target>

    <target name="sencha-steps" description="Builds Sencha application">
        <delete file="src/staticresources/ChainStepSorterZip.resource" />
        <exec command="lib/sencha-cmd-4.0.1.45/sencha --cwd=dev/resource/ChainStepSorterZip ant clean" />
        <exec command="lib/sencha-cmd-4.0.1.45/sencha --cwd=dev/resource/ChainStepSorterZip app refresh" />
        <exec command="lib/sencha-cmd-4.0.1.45/sencha --cwd=dev/resource/ChainStepSorterZip app build" />
        <zip destfile="src/staticresources/ChainStepSorterZip.resource" basedir="dev/resource/ChainStepSorterZip/build/production/Steps" includes="**"/>
    </target>

    <target name="sencha-generate" description="Builds Generate application">
        <delete file="src/staticresources/ProcessGenerateZip.resource" />
        <exec command="lib/sencha-cmd-4.0.1.45/sencha --cwd=dev/resource/ProcessGenerateZip ant clean" />
        <exec command="lib/sencha-cmd-4.0.1.45/sencha --cwd=dev/resource/ProcessGenerateZip app refresh" />
        <exec command="lib/sencha-cmd-4.0.1.45/sencha --cwd=dev/resource/ProcessGenerateZip app build" />
        <zip destfile="src/staticresources/ProcessGenerateZip.resource" basedir="dev/resource/ProcessGenerateZip/build/production/Generate" includes="**"/>
    </target>

    <target name="usage">
        <java classname="org.apache.tools.ant.Main">
            <arg value="-projecthelp"/>
            <arg value="-quiet"/>
        </java>
    </target>

</project>