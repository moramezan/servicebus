{
    "type": "Ext.window.Window",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "autoEl": null,
        "bodyBorder": false,
        "border": false,
        "designer|userClassName": "Config",
        "draggable": false,
        "frameHeader": false,
        "headerPosition": null,
        "height": null,
        "layout": "fit",
        "modal": true,
        "overlapHeader": false,
        "resizable": false,
        "title": "Configure Step",
        "width": null
    },
    "configAlternates": {
        "resizable": "boolean"
    },
    "designerId": "a4ba8200-5230-48ee-8a1b-d2ae5ba2cfb4",
    "cn": [
        {
            "type": "processcfgfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "config"
                ],
                "fn": "processConfig",
                "implHandler": [
                    "//make the window occupy most of the viewport",
                    "config.width = Math.floor(Ext.Element.getViewportWidth() * 0.8);",
                    "config.height = Math.floor(Ext.Element.getViewportHeight() * 0.8);",
                    "",
                    "//'clickjack protection for non-setup Salesforce pages' is enabled",
                    "var nag = {",
                    "    'tag': 'div',",
                    "    'html': [",
                    "        '<p>&nbsp;&nbsp;&nbsp;&nbsp;Hey, it looks like frames are blocked in Salesforce.</p>',",
                    "        '<p>&nbsp;&nbsp;&nbsp;&nbsp;To fix this, scroll to the bottom of ',",
                    "        \"<a href='\" + URLFOR[SessionSettingsLink] + \"'>this page</a>\",",
                    "        ' and click <b>Save</b>.</p>'",
                    "    ].join('')",
                    "};",
                    "",
                    "//dump iframe here per http://stackoverflow.com/a/6027501/1606872",
                    "var iframe = {",
                    "    'tag': 'iframe',",
                    "    'src': config.url,",
                    "    'scrolling': 'yes',",
                    "    'cls': 'twirly'",
                    "};",
                    "",
                    "config.items = [{",
                    "    xtype: 'component',",
                    "    autoEl: IsFrameBlocked ? nag : iframe",
                    "}];"
                ]
            },
            "designerId": "2fba5f62-cb3b-4cfc-ad1f-84964f501039"
        },
        {
            "type": "basiceventbinding",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onWindowShow",
                "implHandler": [
                    "var win = component;",
                    "",
                    "var closer = function() {",
                    "    component.close();",
                    "};",
                    "",
                    "//close the window if user clicks outside",
                    "win.mon(Ext.getBody(), 'click', closer, win, {delegate: '.' + Ext.baseCSSPrefix + 'mask'});"
                ],
                "name": "show",
                "scope": "me"
            },
            "designerId": "35defe66-05da-4633-afb6-0206e6e0995e"
        }
    ]
}